// THIS FILE IS AUTOMATICALLY GENERATED: DO NOT EDIT

= image:kamelets/pulsar-sink.svg[] Pulsar Sink

*Provided by: "Apache Software Foundation"*

*Support Level for this Kamelet is: "Preview"*

Send documents to Pulsar.

== Configuration Options

The following table summarizes the configuration options available for the `pulsar-sink` Kamelet:
[width="100%",cols="2,^2,3,^2,^2,^3",options="header"]
|===
| Property| Name| Description| Type| Default| Example
| *namespaceName {empty}* *| Pulsar Namespace Name| The Pulsar Namespace Name| string| | 
| *serviceUrl {empty}* *| Service URL| The Pulsar Service URL to point while creating the client from URI.| string| | 
| *tenant {empty}* *| Tenant Name| The Tenant Name| string| | 
| *topic {empty}* *| Topic Name| The topic name or regexp| string| | 
| *topicType {empty}* *| Topic Type| The topic type. Possible values are: persistent or non-persistent| string| | 
| authenticationClass| Authentication Class| The Authentication FQCN to be used while creating the client from URI.| string| | 
| authenticationParams| Authentication Params| The Authentication Parameters to be used while creating the client from URI.| string| | 
| batchingEnabled| Enable Batching| Control whether automatic batching of messages is enabled for the producer.| boolean| `true`| 
| batchingMaxMessages| Batching Maximum Messages| The maximum size to batch messages.| int| `1000`| 
| batchingMaxPublishDelayMicros| Batching Maximum Publish Delay in Microsecond| The maximum time period within which the messages sent will be batched if batchingEnabled is true.| long| `1000`| 
| blockIfQueueFull| Block If Queue Full| Whether to block the producing thread if pending messages queue is full or to throw a ProducerQueueIsFullError.| boolean| `false`| 
| compressionType| Compression Type| Compression type to use. Possible values are: NONE, LZ4, ZLIB, ZSTD, SNAPPY| string| `"NONE"`| 
| initialSequenceId| Initial SequenceId| The first message published will have a sequence Id of initialSequenceId 1.| long| `-1`| 
| lazyStartProducer| Number Of Consumer Threads| Whether the producer should be started lazy (on the first message). By starting lazy you can use this to allow CamelContext and routes to startup in situations where a producer may otherwise fail during starting and cause the route to fail being started. By deferring this startup to be lazy then the startup failure can be handled during routing messages via Camelâ€™s routing error handlers. Beware that when the first message is processed then creating and starting the producer may take a little time and prolong the total processing time of the processing.| boolean| `false`| 
| maxPendingMessages| Maximum Pending Messages| Size of the pending massages queue. When the queue is full, by default, any further sends will fail unless blockIfQueueFull=true.| int| `1000`| 
| maxPendingMessagesAcrossPartitions| Maximum Pending Messages Across Partitions| The maximum number of pending messages for partitioned topics. The maxPendingMessages value will be reduced if (number of partitions maxPendingMessages) exceeds this value. Partitioned topics have a pending message queue for each partition.| int| `50000`| 
| messageRoutingMode| Message Routing Mode| Message Routing Mode to use. Possible values are SinglePartition, RoundRobinPartition, CustomPartition| string| `"RoundRobinPartition"`| 
| producerName| Producer Name| Name of the producer. If unset, lets Pulsar select a unique identifier.| string| | 
| sendTimeoutMs| Send Timeout in Milliseconds| Send timeout in milliseconds.| int| `30000`| 
|===

NOTE: Fields marked with an asterisk ({empty}*) are mandatory.


== Dependencies

At runtime, the `pulsar-sink` Kamelet relies upon the presence of the following dependencies:

- camel:pulsar
- camel:kamelet
- camel:core 

== Usage

This section describes how you can use the `pulsar-sink`.

=== Knative Sink

You can use the `pulsar-sink` Kamelet as a Knative sink by binding it to a Knative object.

.pulsar-sink-binding.yaml
[source,yaml]
----
apiVersion: camel.apache.org/v1alpha1
kind: KameletBinding
metadata:
  name: pulsar-sink-binding
spec:
  source:
    ref:
      kind: Channel
      apiVersion: messaging.knative.dev/v1
      name: mychannel
  sink:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: pulsar-sink
    properties:
      namespaceName: "The Pulsar Namespace Name"
      serviceUrl: "The Service URL"
      tenant: "The Tenant Name"
      topic: "The Topic Name"
      topicType: "The Topic Type"
  
----

==== *Prerequisite*

You have xref:{camel-k-version}@camel-k::installation/installation.adoc[Camel K installed] on the cluster.

==== *Procedure for using the cluster CLI*

. Save the `pulsar-sink-binding.yaml` file to your local drive, and then edit it as needed for your configuration.

. Run the sink by using the following command:
+
[source,shell]
----
kubectl apply -f pulsar-sink-binding.yaml
----

==== *Procedure for using the Kamel CLI*

Configure and run the sink by using the following command:

[source,shell]
----
kamel bind channel:mychannel pulsar-sink -p "sink.namespaceName=The Pulsar Namespace Name" -p "sink.serviceUrl=The Service URL" -p "sink.tenant=The Tenant Name" -p "sink.topic=The Topic Name" -p "sink.topicType=The Topic Type"
----

This command creates the KameletBinding in the current namespace on the cluster.

=== Kafka Sink

You can use the `pulsar-sink` Kamelet as a Kafka sink by binding it to a Kafka topic.

.pulsar-sink-binding.yaml
[source,yaml]
----
apiVersion: camel.apache.org/v1alpha1
kind: KameletBinding
metadata:
  name: pulsar-sink-binding
spec:
  source:
    ref:
      kind: KafkaTopic
      apiVersion: kafka.strimzi.io/v1beta1
      name: my-topic
  sink:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: pulsar-sink
    properties:
      namespaceName: "The Pulsar Namespace Name"
      serviceUrl: "The Service URL"
      tenant: "The Tenant Name"
      topic: "The Topic Name"
      topicType: "The Topic Type"
  
----

==== *Prerequisites*

* You've installed https://strimzi.io/[Strimzi].
* You've created a topic named `my-topic` in the current namespace.
* You have xref:{camel-k-version}@camel-k::installation/installation.adoc[Camel K installed] on the cluster.

==== *Procedure for using the cluster CLI*

. Save the `pulsar-sink-binding.yaml` file to your local drive, and then edit it as needed for your configuration.

. Run the sink by using the following command:
+
[source,shell]
----
kubectl apply -f pulsar-sink-binding.yaml
----

==== *Procedure for using the Kamel CLI*

Configure and run the sink by using the following command:

[source,shell]
----
kamel bind kafka.strimzi.io/v1beta1:KafkaTopic:my-topic pulsar-sink -p "sink.namespaceName=The Pulsar Namespace Name" -p "sink.serviceUrl=The Service URL" -p "sink.tenant=The Tenant Name" -p "sink.topic=The Topic Name" -p "sink.topicType=The Topic Type"
----

This command creates the KameletBinding in the current namespace on the cluster.

== Kamelet source file

https://github.com/apache/camel-kamelets/blob/main/kamelets/pulsar-sink.kamelet.yaml

// THIS FILE IS AUTOMATICALLY GENERATED: DO NOT EDIT
