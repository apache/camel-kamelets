// THIS FILE IS AUTOMATICALLY GENERATED: DO NOT EDIT

= image:kamelets/xj-template-action.svg[] XJ Template Action

*Provided by: "Apache Software Foundation"*

*Support Level for this Kamelet is: "Preview"*

Apply the XJ Identity Transformation to transform JSON to XML and XML to JSON. 

The template property needs to be encoded in base64, so when you pass it as parameter, don't forget to encode it.

== Configuration Options

The following table summarizes the configuration options available for the `xj-template-action` Kamelet:
[width="100%",cols="2,^2,3,^2,^2,^3",options="header"]
|===
| Property| Name| Description| Type| Default| Example
| *direction {empty}* *| Direction| The transform direction, possible values are XML2JSON or JSON2XML| String| | 
| *template {empty}* *| Template| The inline template to apply a transformation through template.| binary| | 
|===

NOTE: Fields marked with an asterisk ({empty}*) are mandatory.


== Dependencies

At runtime, the `xj-template-action Kamelet relies upon the presence of the following dependencies:

- camel:xj
- camel:kamelet 

== Usage

This section describes how you can use the `xj-template-action`.

=== Knative Action

You can use the `xj-template-action` Kamelet as an intermediate step in a Knative binding.

.xj-template-action-binding.yaml
[source,yaml]
----
apiVersion: camel.apache.org/v1alpha1
kind: KameletBinding
metadata:
  name: xj-template-action-binding
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: timer-source
    properties:
      message: "Hello"
  steps:
  - ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: xj-template-action
    properties:
      direction: "The Direction"
      template: "The Template"
  sink:
    ref:
      kind: Channel
      apiVersion: messaging.knative.dev/v1
      name: mychannel

----

==== *Prerequisite*

You have xref:{camel-k-version}@camel-k::installation/installation.adoc[Camel K installed] on the cluster.

==== *Procedure for using the cluster CLI*

. Save the `xj-template-action-binding.yaml` file to your local drive, and then edit it as needed for your configuration.

. Run the action by using the following command:
+
[source,shell]
----
kubectl apply -f xj-template-action-binding.yaml
----

==== *Procedure for using the Kamel CLI*

Configure and run the action by using the following command:

[source,shell]
----
kamel bind timer-source?message=Hello --step xj-template-action -p "step-0.direction=The Direction" -p "step-0.template=The Template" channel:mychannel
----

This command creates the KameletBinding in the current namespace on the cluster.

=== Kafka Action

You can use the `xj-template-action` Kamelet as an intermediate step in a Kafka binding.

.xj-template-action-binding.yaml
[source,yaml]
----
apiVersion: camel.apache.org/v1alpha1
kind: KameletBinding
metadata:
  name: xj-template-action-binding
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: timer-source
    properties:
      message: "Hello"
  steps:
  - ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1alpha1
      name: xj-template-action
    properties:
      direction: "The Direction"
      template: "The Template"
  sink:
    ref:
      kind: KafkaTopic
      apiVersion: kafka.strimzi.io/v1beta1
      name: my-topic

----

==== *Prerequisites*

* You've installed https://strimzi.io/[Strimzi].
* You've created a topic named `my-topic` in the current namespace.
* You have xref:{camel-k-version}@camel-k::installation/installation.adoc[Camel K installed] on the cluster.

==== *Procedure for using the cluster CLI*

. Save the `xj-template-action-binding.yaml` file to your local drive, and then edit it as needed for your configuration.

. Run the action by using the following command:
+
[source,shell]
----
kubectl apply -f xj-template-action-binding.yaml
----

==== *Procedure for using the Kamel CLI*

Configure and run the action by using the following command:

[source,shell]
----
kamel bind timer-source?message=Hello --step xj-template-action -p "step-0.direction=The Direction" -p "step-0.template=The Template" kafka.strimzi.io/v1beta1:KafkaTopic:my-topic
----

This command creates the KameletBinding in the current namespace on the cluster.

== Kamelet source file

https://github.com/apache/camel-kamelets/blob/main/xj-template-action.kamelet.yaml

// THIS FILE IS AUTOMATICALLY GENERATED: DO NOT EDIT
