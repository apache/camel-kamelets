<project name="camel-kamelets" basedir=".">

    <target name="check.snapshot">
        <condition property="is.snapshot">
            <contains string="${project.version}" substring="SNAPSHOT" />
        </condition>
    </target>
    <target name="replace.release" depends="check.snapshot">
        <replaceregexp match="camel.apache.org/catalog.version:.*$" replace="camel.apache.org/catalog.version: &quot;${project.version}&quot;" byline="true">
            <fileset dir=".">
                <include name="*.kamelet.yaml"/>
            </fileset>
        </replaceregexp>
        <replaceregexp match="github:apache.camel-kamelets:camel-kamelets-utils:[A-Za-z0-9-.]+" replace="mvn:org.apache.camel.kamelets:camel-kamelets-utils:${project.version}" byline="true">
            <fileset dir=".">
                <include name="*.kamelet.yaml"/>
            </fileset>
        </replaceregexp>
    </target>
    <target name="replace.snapshot" depends="replace.release" if="is.snapshot">
        <replaceregexp match="mvn:org.apache.camel.kamelets:camel-kamelets-utils:[A-Za-z0-9-.]+" replace="github:apache.camel-kamelets:camel-kamelets-utils:${project.version}" byline="true">
            <fileset dir=".">
                <include name="*.kamelet.yaml"/>
            </fileset>
        </replaceregexp>
    </target>

    <target name="release" depends="replace.snapshot" />

</project>
